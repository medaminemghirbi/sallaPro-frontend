<div class="main-wrapper">
  <app-header-admin></app-header-admin>
  <app-sidebar-admin></app-sidebar-admin>
  <div class="page-wrapper">
    <div class="content">
      <div class="row g-4">


        <div class="col-12 col-md-8">
          <div class="card shadow-sm border-0 rounded-3 h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="card-title fw-bold mb-0">Top gouvernement by Consultations </h5>
                <div class="d-flex align-items-center gap-2">


                  <!-- Top N Selector -->
                  <div class="d-flex align-items-center">
                    <label for="top-selector" class="me-2 mb-0 fw-semibold small">Show:</label>
                    <select id="top-selector" class="form-select form-select-sm w-auto" [(ngModel)]="topN"
                      (change)="updateTopData()">
                      <option value="5">Top 5</option>
                      <option value="10">Top 10</option>
                      <option value="24">Top 24</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="canvas-container text-center" *ngIf="chartReady">
                <canvas mdbChart [chartType]="chartType2" [datasets]="filteredChartDatasets"
                  [labels]="filteredChartLabels" [colors]="chartColors" [options]="chartOptions" [legend]="true"
                  style="width: 100% !important; height: 350px !important;" (chartHover)="chartHovered($event)"
                  (chartClick)="chartClicked($event)">
                </canvas>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="card shadow-sm border-0 rounded-3 h-100">
            <div class="card-body">

              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="card-title fw-bold mb-0">Répartition plateforme par genre</h5>

              </div>

              <div class="canvas-container text-center" *ngIf="chartReady3">
                <canvas mdbChart [chartType]="chartType3" [datasets]="genderChartData" [labels]="genderChartLabels"
                  [colors]="chartColors" [options]="chartOptions" [legend]="true" (chartHover)="chartHovered($event)"
                  style="width: 100% !important; height: 350px !important;" (chartClick)="chartClicked($event)">
                </canvas>
              </div>

            </div>
          </div>
        </div>

      </div>
      <!-- Existing rows above -->

      <!-- New Row for Platform & Gender Doughnut Chart -->
      <div class="row g-4 mt-2">
        <!-- First Chart Card -->
        <div class="col-12 col-md-8">
          <div class="card shadow-sm border-0 rounded-3 h-100">
            <div class="card-body">

              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="card-title fw-bold mb-0">DermaPro en chiffre</h5>

              </div>

              <div class="canvas-container text-center" *ngIf="chartReady1">
                <canvas mdbChart [chartType]="chartType" [datasets]="chartDatasets" [labels]="chartLabels"
                  [colors]="chartColors" [options]="chartOptions" [legend]="true" (chartHover)="chartHovered($event)"
                  (chartClick)="chartClicked($event)" style="width: 100% !important; height: 350px !important;">
                </canvas>
              </div>

            </div>
          </div>
        </div>

        <div class="col-12 col-md-4">
          <div class="card shadow-sm border-0 rounded-3 h-100">
            <div class="card-body">

              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="card-title fw-bold mb-0">Répartition Compte créer par plateforme</h5>

              </div>

              <div class="canvas-container text-center" *ngIf="chartReady3">
                <canvas mdbChart [chartType]="chartType4" [datasets]="plateformChartData" [labels]="plateformChartLabels"
                  [colors]="chartColors" [options]="chartOptions" [legend]="true" (chartHover)="chartHovered($event)"
                  style="width: 100% !important; height: 350px !important;"
                  (chartClick)="chartClicked($event)">
                </canvas>
              </div>

            </div>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>